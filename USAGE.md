# Usage Guide

This guide shows you how to use `@playwright-mcp/automation` in your projects.

## Installation

```bash
npm install -D @playwright-mcp/automation
```

## Quick Start

### 1. Initialize

Run the initialization command in your project root:

```bash
npx playwright-mcp-init
```

This will:
- ‚úÖ Auto-detect your project type (React, .NET, Node.js, etc.)
- ‚úÖ Create test directory structure
- ‚úÖ Generate Playwright configuration
- ‚úÖ Set up MCP server connection
- ‚úÖ Configure your IDE (Cursor, VS Code, JetBrains, etc.)

### 2. Install Playwright Browsers

```bash
npx playwright install
```

### 3. Use with AI IDE

Open your AI IDE (Cursor, VS Code + Copilot, JetBrains, etc.) and use prompts like:

**For API Tests:**
```
Using @playwright-mcp/automation, generate API tests for:
- Endpoint: /api/users
- Methods: GET, POST, PUT, DELETE
- Test scenarios: CRUD operations, validation errors, edge cases
```

**For UI Tests:**
```
Using @playwright-mcp/automation, generate UI tests for:
- Page: /users
- Actions: Create user, edit user, delete user
- Validations: Form validation, error messages, success notifications
```

**For E2E Tests:**
```
Using @playwright-mcp/automation, generate E2E tests for:
- User journey: User registration ‚Üí Login ‚Üí Create product ‚Üí View products
- Validations: Complete flow, error handling, edge cases
```

### 4. Run Tests

```bash
# Run all tests
npx playwright-mcp-test

# Run specific test types
npx playwright-mcp-test api
npx playwright-mcp-test ui
npx playwright-mcp-test e2e

# Run with UI mode (interactive)
npx playwright-mcp-test --ui

# Run in headed mode (see browser)
npx playwright-mcp-test --headed
```

## CLI Commands

### `playwright-mcp-init`

Initialize the automation package in your project.

```bash
npx playwright-mcp-init
```

Options:
- `--force`: Overwrite existing configuration
- `--config`: Path to custom config file

### `playwright-mcp-generate`

Generate test generation prompts for AI agents.

```bash
# Show all prompts
npx playwright-mcp-generate

# Show specific prompt
npx playwright-mcp-generate api
npx playwright-mcp-generate ui
npx playwright-mcp-generate e2e
```

### `playwright-mcp-test`

Run Playwright tests.

```bash
# Run all tests
npx playwright-mcp-test

# Run specific test type
npx playwright-mcp-test api
npx playwright-mcp-test ui
npx playwright-mcp-test e2e

# Run specific test file
npx playwright-mcp-test tests/api/users.spec.ts

# Run with options
npx playwright-mcp-test --ui          # Interactive UI mode
npx playwright-mcp-test --headed      # Show browser
npx playwright-mcp-test --debug       # Debug mode
npx playwright-mcp-test --grep "login" # Run tests matching pattern
```

## Project Types

The package auto-detects and supports:

### React Projects
- ‚úÖ Vite
- ‚úÖ Create React App
- ‚úÖ Next.js
- ‚úÖ Remix

### .NET Projects
- ‚úÖ .NET 8 Web API
- ‚úÖ ASP.NET Core
- ‚úÖ Minimal APIs

### Node.js Projects
- ‚úÖ Express
- ‚úÖ Fastify
- ‚úÖ NestJS

### Other Frameworks
- ‚úÖ Vue.js
- ‚úÖ Angular
- ‚úÖ Svelte

## Configuration

### Zero-Config (Default)

The package works out of the box with auto-detection. No configuration needed!

### Custom Configuration

Create `playwright-mcp.config.js` in your project root:

```javascript
export default {
  projectType: 'react-dotnet', // 'react', 'dotnet', 'node', etc.
  api: {
    url: 'http://localhost:5000',
    type: 'dotnet',
  },
  ui: {
    url: 'http://localhost:5173',
    framework: 'react',
  },
  mcp: {
    enabled: true,
    serverPath: './node_modules/@playwright-mcp/automation/mcp-server/dist/index.js',
  },
  tests: {
    api: './tests/api',
    ui: './tests/ui',
    e2e: './tests/e2e',
  },
};
```

## IDE Setup

### Cursor

The `init` command automatically configures Cursor. The MCP server is added to `.cursor/mcp.json`.

### VS Code + GitHub Copilot

1. Install the MCP extension (if available)
2. Add MCP server configuration to VS Code settings
3. Use the prompts in Copilot Chat

### JetBrains IDEs

1. Install the MCP plugin (if available)
2. Configure MCP server in IDE settings
3. Use prompts in AI Assistant

### Other IDEs

The prompts in `prompts/universal/` are IDE-agnostic. Copy them into your AI IDE's chat.

## Examples

### Example 1: API Testing

```typescript
// Generated by AI using @playwright-mcp/automation prompts
import { test, expect } from '@playwright/test';

test.describe('Users API', () => {
  test('GET /api/users should return list of users', async ({ request }) => {
    const response = await request.get('/api/users');
    expect(response.ok()).toBeTruthy();
    const users = await response.json();
    expect(Array.isArray(users)).toBeTruthy();
  });

  test('POST /api/users should create a new user', async ({ request }) => {
    const response = await request.post('/api/users', {
      data: {
        name: 'John Doe',
        email: 'john@example.com',
      },
    });
    expect(response.ok()).toBeTruthy();
    const user = await response.json();
    expect(user.name).toBe('John Doe');
  });
});
```

### Example 2: UI Testing

```typescript
// Generated by AI using @playwright-mcp/automation prompts
import { test, expect } from '@playwright/test';
import { UsersPage } from './pages/UsersPage';

test.describe('Users Page', () => {
  test('should display users list', async ({ page }) => {
    const usersPage = new UsersPage(page);
    await usersPage.goto();
    await expect(usersPage.userList).toBeVisible();
  });

  test('should create a new user', async ({ page }) => {
    const usersPage = new UsersPage(page);
    await usersPage.goto();
    await usersPage.clickCreateButton();
    await usersPage.fillUserForm({
      name: 'Jane Doe',
      email: 'jane@example.com',
    });
    await usersPage.submitForm();
    await expect(usersPage.successMessage).toBeVisible();
  });
});
```

## Troubleshooting

### "Command not found: playwright-mcp-init"

Make sure the package is installed:
```bash
npm install -D @playwright-mcp/automation
```

### "MCP server not found"

Run the init command:
```bash
npx playwright-mcp-init
```

### Tests fail with "browser not found"

Install Playwright browsers:
```bash
npx playwright install
```

### Auto-detection fails

Create a config file manually:
```bash
npx playwright-mcp-init --config
```

## Advanced Usage

### Custom Test Generators

You can extend the test generation by creating custom prompts:

```typescript
import { TestGenerator } from '@playwright-mcp/automation';

const generator = new TestGenerator();
const prompt = await generator.generateAPITestPrompt({
  endpoint: '/api/custom',
  methods: ['GET', 'POST'],
  scenarios: ['happy path', 'error cases'],
});
```

### MCP Server Integration

The MCP server is automatically started when using AI agents. For manual usage:

```typescript
import { loadMCPServer } from '@playwright-mcp/automation';

const server = await loadMCPServer();
// Use MCP server tools
```

## Support

- üìñ [Full Documentation](./README.md)
- üêõ [Report Issues](https://github.com/yourusername/playwright-mcp-automation/issues)
- üí¨ [Discussions](https://github.com/yourusername/playwright-mcp-automation/discussions)






